<div class="container-fluid">
  <div class="card op-card">
    <button class="close-btn" mat-dialog-close mat-icon-button tabindex="-1">
      <span class="sprite-group-7-close"></span>
    </button>

    <div class="card-title title">
      {{ dialogTitle }}
    </div>
    <form [formGroup]="merchantInfoForm">
      <mat-tab-group
        [selectedIndex]="tabIndex"
        class="op-tab-dialog"
      >
        <mat-tab [label]="'merchant.merchant_detail.info' | translate">
          <ng-template matTabContent>
            <div class="card-body no-padding-bot limit-height">

              <div class="row">
                <section class="col-12">
                  <div class="row">
                    <div class="col-12">
                      <p class="heading">{{
                        "merchant.merchant_dialog.merchant_heading" | translate
                        }}</p>
                    </div>
                  </div>
                  <div class="row">
                    <!-- Left Individual Info -->
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 pr-2">
                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.name" | translate
                            }}</mat-label>
                          <input
                            required
                            matInput
                            [placeholder]="
                              'merchant.merchant_detail.name' | translate
                            "
                            formControlName="merchantName"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['merchantName']"
                            [controlLabel]="
                              'merchant.merchant_detail.name' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.id" | translate
                            }}</mat-label>
                          <input
                            matInput
                            [placeholder]="
                              'merchant.merchant_detail.id' | translate
                            "
                            formControlName="merchantId"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['merchantId']"
                            [controlLabel]="
                              'merchant.merchant_detail.id' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.location" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.location' | translate
                            "
                            formControlName="merchantAddress"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantAddress']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.location' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.area" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            appPhoneNumberOnly
                            phone-number-validate
                            [placeholder]="
                              'merchant.merchant_detail.area'
                                | translate
                            "
                            formControlName="merchantPhone"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantArea']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.area'
                                | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.commune" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.commune' | translate
                            "
                            formControlName="merchantCommune"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantCommune']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.commune' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.manager" | translate
                            }}</mat-label>
                          <mat-select required formControlName="merchantManager">
                            <mat-option
                              *ngFor="let manager of managers"
                              [value]="manager.id">{{manager.name}}
                            </mat-option>
                          </mat-select>
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantManager']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.manager' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.type" | translate
                            }}</mat-label>
                          <mat-select disableOptionCentering="true" formControlName="merchantType" multiple>
                            <mat-select-trigger>
                                                    <span
                                                      *ngIf="
                                                        merchantInfoForm.controls.merchantType.value
                                                          .length <= 1; else typeMultipleOptions
                                                     "
                                                    >{{
                                                      merchantInfoForm.controls.merchantType.value
                                                        ? merchantInfoForm.controls.merchantType
                                                          .value[0]
                                                        : ""
                                                      }}</span>
                              <ng-template #typeMultipleOptions>
                                Đã chọn {{merchantInfoForm.controls.merchantType.value
                                .length}} nhóm
                              </ng-template>
                            </mat-select-trigger>
                            <mat-option
                              *ngFor="let option of typeOptions"
                              [value]="option.name"
                            >{{ option.name }}</mat-option
                            >
                          </mat-select>
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantType']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.type' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>
                    </div>
                    <!-- Right Individual Info -->
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 pl-2">
                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.fee" | translate
                            }}</mat-label>
                          <input
                            required
                            matInput
                            appNumberOnly
                            [placeholder]="
                              'merchant.merchant_detail.fee' | translate
                            "
                            formControlName="merchantFee"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantFee']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.fee' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.phone_number" | translate
                            }}</mat-label>
                          <input
                            required
                            matInput
                            appNumberOnly
                            [placeholder]="
                              'merchant.merchant_detail.phone_number' | translate
                            "
                            formControlName="merchantPhone"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantPhone']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.phone_number' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.email" | translate
                            }}</mat-label>
                          <input
                            required
                            matInput
                            [placeholder]="
                              'merchant.merchant_detail.email' | translate
                            "
                            formControlName="merchantEmail"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantEmail']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.email' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.website" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.website' | translate
                            "
                            formControlName="merchantWebsite"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantWebsite']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.website' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.regis_no" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.regis_no' | translate
                            "
                            formControlName="merchantRegistrationNumber"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls[
                                'merchantRegistrationNumber'
                              ]
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.regis_no' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.establish" | translate
                            }}</mat-label>
                          <input
                            matInput
                            [matDatepicker]="picker"
                            [placeholder]="
                              'merchant.merchant_detail.establish' | translate
                            "
                            formControlName="merchantEstablish"
                          />
                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantEstablish']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.establish' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.product" | translate
                            }}</mat-label>
                          <mat-select required formControlName="merchantProduct">
                            <mat-option
                              *ngFor="let product of products"
                              [value]="product.id">{{product.name}}
                            </mat-option>
                          </mat-select>

                          <show-errors
                            [control]="
                              merchantInfoForm.controls['merchantProduct']
                            "
                            [controlLabel]="
                              'merchant.merchant_detail.product' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <p class="heading">{{
                      "merchant.merchant_dialog.admin_heading" | translate
                      }}</p>
                  </div>

                  <div class="row">
                    <!-- Left Individual Info -->
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 pr-2">
                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.username" | translate
                            }}</mat-label>
                          <input
                            required
                            matInput
                            [placeholder]="
                              'merchant.merchant_detail.username' | translate
                            "
                            formControlName="username"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['username']"
                            [controlLabel]="
                              'merchant.merchant_detail.username' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.password" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.password' | translate
                            "
                            formControlName="password"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['password']"
                            [controlLabel]="
                              'merchant.merchant_detail.password' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.re_password" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            appPhoneNumberOnly
                            phone-number-validate
                            [placeholder]="
                              'merchant.merchant_detail.re_password'
                                | translate
                            "
                            formControlName="rePassword"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['rePassword']"
                            [controlLabel]="
                              'merchant.merchant_detail.re_password'
                                | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>
                    </div>

                    <!-- Right Individual Info -->
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 pl-2">
                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.admin_name" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.admin_name' | translate
                            "
                            formControlName="name"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['name']"
                            [controlLabel]="
                              'merchant.merchant_detail.admin_name' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.position" | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            appNumberOnly
                            [placeholder]="
                              'merchant.merchant_detail.position' | translate
                            "
                            formControlName="position"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['position']"
                            [controlLabel]="
                              'merchant.merchant_detail.position' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.phone_number" | translate
                            }}</mat-label>
                          <input
                            required
                            matInput
                            [placeholder]="
                              'merchant.merchant_detail.phone_number' | translate
                            "
                            formControlName="phone"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['phone']"
                            [controlLabel]="
                              'merchant.merchant_detail.phone_number' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.email"
                              | translate
                            }}</mat-label>
                          <input
                            matInput
                            required
                            [placeholder]="
                              'merchant.merchant_detail.email'
                                | translate
                            "
                            formControlName="email"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['email']"
                            [controlLabel]="
                              'merchant.merchant_detail.email'
                                | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <p class="heading">{{
                      "merchant.merchant_dialog.feature_heading" | translate
                      }}</p>
                  </div>

                  <div class="row">
                    <div class="col-12 col-sm-12 col-md-6 col-lg-6 pl-2">
                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.discount" | translate
                            }}</mat-label>
                          <input
                            matInput
                            [placeholder]="
                              'merchant.merchant_detail.discount' | translate
                            "
                            formControlName="discount"
                          />
                          <show-errors
                            [control]="merchantInfoForm.controls['discount']"
                            [controlLabel]="
                              'merchant.merchant_detail.discount' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>

                      <div>
                        <mat-form-field appearance="outline" class="w-100">
                          <mat-label>{{
                            "merchant.merchant_detail.show" | translate
                            }}</mat-label>
                          <mat-select disableOptionCentering="true" formControlName="show" multiple>
                            <mat-select-trigger>
                                                    <span
                                                      *ngIf="
                                                        merchantInfoForm.controls.show.value
                                                          .length <= 1; else showMultipleOptions
                                                     "
                                                    >{{
                                                      merchantInfoForm.controls.show.value
                                                        ? merchantInfoForm.controls.show
                                                          .value[0]
                                                        : ""
                                                      }}</span>
                              <ng-template #showMultipleOptions>
                                {{merchantInfoForm.controls.show.value}}
                              </ng-template>
                            </mat-select-trigger>
                            <mat-option
                              *ngFor="let option of showOptions"
                              [value]="option.name"
                            >{{ option.name }}</mat-option
                            >
                          </mat-select>
                          <show-errors
                            [control]="merchantInfoForm.controls['show']"
                            [controlLabel]="
                              'merchant.merchant_detail.show' | translate
                            "
                            [hasIconPrefix]="false"
                          >
                          </show-errors>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                </section>
              </div>
            </div>
          </ng-template>
        </mat-tab>

        <mat-tab [label]="'merchant.merchant_image.title' | translate">
          <ng-template matTabContent>
            <div class="card-body no-padding-bot">
              <div class="row">
                <section class="col-12">
                  <app-merchant-image-upload></app-merchant-image-upload>

                  <mat-form-field
                    appearance="standard"
                    color="primary"
                    class="w-100 mt-1"
                  >
                    <mat-label
                      class="d-flex align-items-center gap-2 op-text-area-label-content"
                    >
                      <span class="op-text-area-label">{{
                        "merchant.merchant_image.introduction" | translate
                        }}</span>
                    </mat-label>
                    <textarea
                      matInput
                      class="note-area"
                      id="review"
                      name="review"
                      formControlName="introduction"
                      [placeholder]="'merchant.merchant_image.introduction' | translate"
                    ></textarea>
                  </mat-form-field>
                </section>
              </div>
            </div>
          </ng-template>
        </mat-tab>
      </mat-tab-group>

      <!--  Actions -->
      <div class="action mt-2">
        <div class="col-12 d-flex gap-2 justify-content-end">
          <button class="bg-grey" mat-button mat-dialog-close>
            {{ "merchant.merchant_dialog.cancel" | translate }}
          </button>
          <button (click)="submitForm()" color="accent" mat-flat-button>
            <span class="sprite-group-5-save-white"></span>
            <span class="ms-1">{{
              "merchant.merchant_dialog.save" | translate
              }}</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
