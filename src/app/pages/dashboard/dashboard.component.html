<div class="container-fluid op-background-container">
  <div class="container">
    <div class="dashboard-content">
      <!-- Overview -->
      <section class="row g-2 g-md-1 g-lg-2">
        <article class="col-12 col-sm-12 col-md-4 col-lg-4">
          <div class="card op-card">
            <div class="card-title d-flex align-items-center gap-1">
              <span class="sprite-group-5-coin-green"></span>
              <h2 class="card-name">Khoản vay</h2>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-4">
                  <p class="card-info-title">Tổng khoản vay</p>
                  <p class="card-info-content">13</p>
                </div>
                <div class="col-8">
                  <p class="card-info-title">Tổng giá trị</p>
                  <p class="card-info-content">{{ 10000000 | formatPrice }}</p>
                </div>
              </div>
            </div>
          </div>
        </article>
        <article class="col-12 col-sm-12 col-md-4 col-lg-4">
          <div class="card op-card">
            <div class="card-title d-flex align-items-center gap-1">
              <span class="sprite-group-5-coin-green"></span>
              <h2 class="card-name">Bảo hiểm</h2>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-4">
                  <p class="card-info-title">Tổng khoản vay</p>
                  <p class="card-info-content">13</p>
                </div>
                <div class="col-8">
                  <p class="card-info-title">Tổng giá trị</p>
                  <p class="card-info-content">{{ 10000000 | formatPrice }}</p>
                </div>
              </div>
            </div>
          </div>
        </article>
        <article class="col-12 col-sm-12 col-md-4 col-lg-4">
          <div class="card op-card">
            <div class="card-title d-flex align-items-center gap-1">
              <span class="sprite-group-5-coin-green"></span>
              <h2 class="card-name">Khách hàng</h2>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-4">
                  <p class="card-info-title">Tổng khoản vay</p>
                  <p class="card-info-content">13</p>
                </div>
                <div class="col-8">
                  <p class="card-info-title">Tổng giá trị</p>
                  <p class="card-info-content">{{ 10000000 | formatPrice }}</p>
                </div>
              </div>
            </div>
          </div>
        </article>
      </section>

      <!--  Chart  -->
      <section class="row g-2 g-md-1 g-lg-2 mt-2">
        <!--  Left chart  -->
        <article class="col-12 col-sm-12 col-md-8 col-lg-8">
          <div class="card op-card h-100">
            <div
              class="
                card-title
                d-flex
                align-items-center
                justify-content-between
                gap-1
              "
            >
              <h2 class="card-name">Sale performance</h2>
              <span class="sprite-group-5-setting"></span>
            </div>
            <div class="card-body">
              <div class="chart-wrapper">
                <canvas
                  baseChart
                  [datasets]="lineChartData"
                  [labels]="lineChartLabels"
                  [options]="lineChartOptions"
                  [colors]="lineChartColors"
                  [legend]="lineChartLegend"
                  [chartType]="lineChartType"
                  [plugins]="lineChartPlugins"
                >
                </canvas>
              </div>
            </div>
          </div>
        </article>

        <!--  Right chart  -->
        <article class="col-12 col-sm-12 col-md-4 col-lg-4">
          <div class="card op-card h-100">
            <div
              class="
                card-title
                d-flex
                align-items-center
                justify-content-between
                gap-1
              "
            >
              <h2 class="card-name">Top categories</h2>
              <a>
                <span class="sprite-group-5-setting"></span>
              </a>
            </div>
            <div class="card-body">
              <div class="chart-wrapper">
                <canvas
                  baseChart
                  [data]="doughnutChartData"
                  [labels]="doughnutChartLabels"
                  [chartType]="doughnutChartType"
                >
                </canvas>
              </div>
            </div>
          </div>
        </article>
      </section>

      <!--  Table  -->
      <section class="row mt-2">
        <div class="col">
          <div class="card op-card h-100">
            <div
              class="
                card-title
                d-flex
                align-items-center
                justify-content-between
                gap-1
              "
            >
              <h2 class="card-name">Khách hàng mới</h2>

              <!-- Display Column -->
              <button
                mat-flat-button
                type="button"
                (click)="panelOpenState = !panelOpenState"
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10 16H14C14.5523 16 15 16.4477 15 17C15 17.5128 14.614 17.9355 14.1166 17.9933L14 18H10C9.44772 18 9 17.5523 9 17C9 16.4872 9.38604 16.0645 9.88338 16.0067L10 16H14H10ZM8 11H16C16.5523 11 17 11.4477 17 12C17 12.5128 16.614 12.9355 16.1166 12.9933L16 13H8C7.44772 13 7 12.5523 7 12C7 11.4872 7.38604 11.0645 7.88338 11.0067L8 11H16H8ZM5 6H19C19.5523 6 20 6.44772 20 7C20 7.51284 19.614 7.93551 19.1166 7.99327L19 8H5C4.44772 8 4 7.55228 4 7C4 6.48716 4.38604 6.06449 4.88338 6.00673L5 6H19H5Z"
                    fill="#8E8E93"
                  />
                </svg>
              </button>
              <mat-accordion class="filter-panel">
                <mat-expansion-panel
                  hideToggle
                  [expanded]="panelOpenState"
                >
                  <div class="filter-description">
                    Trường thông tin
                    <button mat-button class="reset-btn">Đặt lại</button>
                  </div>
                  <div class="filter-fields">
                    <div *ngFor="let ele of selectedFields" class="field">
                      <mat-checkbox class="checkbox" checked="ele.fieldState" (click)="updateDisplayColumns(ele)" color="primary">{{ele?.fieldName}}</mat-checkbox>
                    </div>
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
            </div>
            <div class="card-body">
              <app-base-expanded-table
                [dataSource]="dataSource"
                [pageIndex]="pageIndex"
                [displayedColumns]="displayedColumns"
                [totalItems]="totalItems"
                [pageSizeOptions]="pageSizeOptions"
                [detailElementTemplate]="detailElementTemplate"
              >
              </app-base-expanded-table>
              <ng-template #detailElementTemplate>
                <app-customer-detail-element></app-customer-detail-element>
              </ng-template>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
